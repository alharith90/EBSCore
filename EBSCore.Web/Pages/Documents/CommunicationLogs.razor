@page "/Documents/Communications"
@using Microsoft.Extensions.Localization
@inject HttpClient Http
@inject IStringLocalizerFactory LocalizerFactory

<h3>@Localizer["CommunicationLogsTitle"]</h3>
<p>@Localizer["CommunicationLogsDescription"]</p>

<button class="btn btn-secondary" @onclick="QueueNotifications">@Localizer["QueueNotifications"]</button>

@code {
    private IStringLocalizer Localizer;

    protected override void OnInitialized()
    {
        Localizer ??= LocalizerFactory.Create(typeof(App));
    }

    private async Task QueueNotifications()
    {
        try
        {
            await Http.PostAsync("/api/S7SDocControl/notifications/review", null);
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Failed to queue notifications: {ex.Message}");
        }
    }
}
